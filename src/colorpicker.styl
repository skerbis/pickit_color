/* Pickit ColorPicker Styles */

/* Variables */
$cp-radius = 8px
$cp-shadow = 0 4px 12px rgba(0, 0, 0, 0.15)
$cp-primary = #3b82f6
$cp-border = #e5e7eb
$cp-bg = #ffffff
$cp-text = #1f2937

/* Screen reader only */
.colorpicker-sr-only
  position absolute
  width 1px
  height 1px
  padding 0
  margin -1px
  overflow hidden
  clip rect(0, 0, 0, 0)
  white-space nowrap
  border-width 0

/* Container */
.colorpicker-container
  font-family system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif
  background $cp-bg
  border 1px solid $cp-border
  border-radius $cp-radius
  box-shadow $cp-shadow
  padding 16px
  width 280px
  user-select none
  
  &:focus-within
    outline 2px solid $cp-primary
    outline-offset 2px
  
  // Inline mode: adjust to container width
  &.colorpicker-inline
    width 100%
    max-width 100%
    box-shadow none
    
    .colorpicker-saturation
      height 200px
  
  // Presets-only mode: compact layout
  &.colorpicker-presets-only
    width auto
    min-width 200px
    max-width 400px
    
    .colorpicker-presets
      margin 0
      padding 0
    
    // Inline + presets-only: full width
    &.colorpicker-inline
      max-width 100%

/* Content */
.colorpicker-content
  display flex
  flex-direction column
  gap 16px

/* Saturation/Lightness Box */
.colorpicker-saturation
  position relative
  width 100%
  height 180px
  background linear-gradient(to top, #000, transparent), linear-gradient(to right, #fff, transparent)
  border-radius ($cp-radius - 2px)
  cursor crosshair
  overflow hidden
  touch-action none
  
  &:focus
    outline 2px solid $cp-primary
    outline-offset 2px
  
  &:focus:not(:focus-visible)
    outline none

.colorpicker-saturation-overlay
  position absolute
  top 0
  left 0
  right 0
  bottom 0
  pointer-events none

.colorpicker-saturation-pointer
  position absolute
  width 20px
  height 20px
  border 3px solid #ffffff
  border-radius 50%
  box-shadow 0 2px 4px rgba(0, 0, 0, 0.3), inset 0 0 0 1px rgba(0, 0, 0, 0.1)
  transform translate(-50%, -50%)
  pointer-events none
  transition transform 0.1s ease
  
  @media (pointer: coarse)
    width 28px
    height 28px
    border-width 4px
  
  @media (prefers-reduced-motion: reduce)
    transition none

/* Controls Section */
.colorpicker-controls
  display flex
  gap 12px
  align-items stretch

.colorpicker-sliders
  flex 1
  display flex
  flex-direction column
  gap 12px

.colorpicker-slider-group
  display flex
  flex-direction column
  gap 4px

.colorpicker-label
  font-size 12px
  font-weight 500
  color #6b7280
  text-transform uppercase
  letter-spacing 0.5px

/* Range Sliders */
.colorpicker-slider
  -webkit-appearance none
  appearance none
  touch-action none
  
  @media (pointer: coarse)
    height 12px
  
  &:focus
    box-shadow 0 0 0 2px $cp-primary
  
  &::-webkit-slider-thumb
    -webkit-appearance none
    appearance none
    width 18px
    height 18px
    border-radius 50%
    background #ffffff
    border 2px solid $cp-primary
    cursor pointer
    box-shadow 0 2px 4px rgba(0, 0, 0, 0.2)
    transition transform 0.1s ease
    
    @media (pointer: coarse)
      width 28px
      height 28px
      border-width 3px
    
    &:hover
      transform scale(1.1)
    
    &:active
      transform scale(0.95)
  
  &::-moz-range-thumb
    width 18px
    height 18px
    border-radius 50%
    background #ffffff
    border 2px solid $cp-primary
    cursor pointer
    box-shadow 0 2px 4px rgba(0, 0, 0, 0.2)
    transition transform 0.1s ease
    
    @media (pointer: coarse)
      width 28px
      height 28px
      border-width 3px
    background #ffffff
    border 2px solid $cp-primary
    cursor pointer
    box-shadow 0 2px 4px rgba(0, 0, 0, 0.2)
    transition transform 0.1s ease
    
    &:hover
      transform scale(1.1)
    
    &:active
      transform scale(0.95)

/* Hue Slider */
.colorpicker-hue-slider
  background linear-gradient(to right, 
    hsl(0, 100%, 50%), 
    hsl(60, 100%, 50%), 
    hsl(120, 100%, 50%), 
    hsl(180, 100%, 50%), 
    hsl(240, 100%, 50%), 
    hsl(300, 100%, 50%), 
    hsl(360, 100%, 50%)
  )

/* Alpha Slider */
.colorpicker-alpha-slider
  background linear-gradient(to right, transparent, currentColor), linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%)
  background-size 100%, 10px 10px, 10px 10px, 10px 10px, 10px 10px
  background-position 0 0, 0 0, 0 5px, 5px -5px, -5px 0px

/* Saturation & Lightness Sliders (backgrounds set dynamically in JS) */
.colorpicker-saturation-slider,
.colorpicker-lightness-slider
  /* Background gradient is set dynamically based on current H/S values */

/* Slider-only mode layout */
.colorpicker-sliders-only
  gap 12px

/* Controls Container - im Slider-Modus vertikal */
.colorpicker-controls
  display flex
  gap 12px
  
  // Im normalen Modus: Slider links, Preview rechts
  &:has(.colorpicker-sliders:not(.colorpicker-sliders-only))
    flex-direction row
  
  // Im Slider-Modus: Preview oben, dann Slider
  &:has(.colorpicker-sliders-only)
    flex-direction column
    
    .colorpicker-preview
      width 100%
      height 48px
      min-height 48px
      order -1
      
      .colorpicker-preview-color
        min-height 48px

/* Preview */
.colorpicker-preview
  width 40px
  min-width 40px
  height 40px
  min-height 40px
  display flex
  align-items stretch
  flex-shrink 0

.colorpicker-preview-color
  flex 1
  border-radius ($cp-radius - 2px)
  border 2px solid $cp-border
  box-shadow inset 0 2px 4px rgba(0, 0, 0, 0.05)
  position relative
  
  // Schachbrettmuster für Transparenz
  &::before
    content ''
    position absolute
    top 0
    left 0
    right 0
    bottom 0
    background linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%)
    background-size 10px 10px
    background-position 0 0, 0 5px, 5px -5px, -5px 0px
    border-radius ($cp-radius - 4px)
    z-index -1

/* Input Wrapper (inside picker) */
.colorpicker-input-wrapper
  display flex
  flex-direction column
  gap 4px

.colorpicker-input-row
  display flex
  gap 8px
  align-items center

.colorpicker-input
  flex 1
  padding 8px 12px
  border 1px solid $cp-border
  border-radius ($cp-radius - 2px)
  font-family 'Monaco', 'Menlo', monospace
  font-size 14px
  color $cp-text
  background $cp-bg
  transition border-color 0.2s ease, box-shadow 0.2s ease
  
  &:focus
    outline none
    border-color $cp-primary
    box-shadow 0 0 0 3px rgba(59, 130, 246, 0.1)
  
  &::placeholder
    color #9ca3af

.colorpicker-eyedropper-btn
  display flex
  align-items center
  justify-content center
  width 36px
  height 36px
  padding 8px
  border 1px solid $cp-border
  border-radius ($cp-radius - 2px)
  background $cp-bg
  color $cp-text
  cursor pointer
  transition all 0.2s ease
  flex-shrink 0
  
  @media (pointer: coarse)
    width 44px
    height 44px
  
  &:hover
    background #f3f4f6
    border-color $cp-primary
  
  &:active
    transform scale(0.95)
  
  &:focus
    outline none
    border-color $cp-primary
    box-shadow 0 0 0 3px rgba(59, 130, 246, 0.1)
  
  svg
    width 20px
    height 20px
    display block

.colorpicker-system-picker-btn
  display flex
  align-items center
  justify-content center
  width 36px
  height 36px
  padding 8px
  border 1px solid $cp-border
  border-radius ($cp-radius - 2px)
  background $cp-bg
  color $cp-text
  cursor pointer
  transition all 0.2s ease
  flex-shrink 0
  
  &:hover
    background #f3f4f6
    border-color $cp-primary
  
  &:active
    transform scale(0.95)
  
  &:focus
    outline none
    border-color $cp-primary
    box-shadow 0 0 0 3px rgba(59, 130, 246, 0.1)
  
  svg
    width 20px
    height 20px
    display block

/* Presets */
.colorpicker-presets
  display grid
  grid-template-columns repeat(8, 1fr)
  gap 8px
  padding-top 4px
  
  &.colorpicker-presets-list
    grid-template-columns 1fr
    gap 6px

.colorpicker-preset
  width 100%
  aspect-ratio 1
  border 2px solid transparent
  border-radius ($cp-radius - 4px)
  cursor pointer
  transition all 0.2s ease
  position relative
  overflow hidden
  
  @media (pointer: coarse)
    min-height 44px
  
  // Schachbrettmuster für Transparenz (als Pseudo-Element unter der Farbe)
  &::before
    content ''
    position absolute
    top 0
    left 0
    right 0
    bottom 0
    background linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%)
    background-size 6px 6px
    background-position 0 0, 0 3px, 3px -3px, -3px 0px
    z-index -1
  
  &:hover
    transform scale(1.15)
    border-color $cp-primary
    box-shadow 0 2px 8px rgba(0, 0, 0, 0.15)
  
  @media (pointer: coarse)
    &:hover
      transform scale(1.05)
  
  &:focus
    outline none
    border-color $cp-primary
    box-shadow 0 0 0 2px rgba(59, 130, 246, 0.3)
  
  &:active
    transform scale(0.95)

/* List view for presets */
.colorpicker-preset-list-item
  aspect-ratio unset
  display flex
  align-items center
  gap 12px
  padding 8px 12px
  background #f9fafb
  min-height 48px
  
  @media (pointer: coarse)
    min-height 56px
    padding 12px
  
  &:hover
    transform none
    background #f3f4f6
    
  &:focus
    background #f3f4f6

.colorpicker-preset-color
  width 32px
  height 32px
  border-radius 6px
  flex-shrink 0
  position relative
  
  // Schachbrettmuster für Transparenz
  &::before
    content ''
    position absolute
    top 0
    left 0
    right 0
    bottom 0
    background linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%)
    background-size 6px 6px
    background-position 0 0, 0 3px, 3px -3px, -3px 0px
    border-radius 6px
    z-index -1

.colorpicker-preset-label
  font-size 14px
  font-weight 500
  color #1f2937
  text-align left
  flex 1

/* Input Group with Preview */
.colorpicker-input-group
  display inline-flex
  align-items stretch
  width 100%
  max-width 400px
  border 2px solid $cp-border
  border-radius $cp-radius
  overflow hidden
  transition all 0.2s ease
  background $cp-bg
  
  &:focus-within
    border-color $cp-primary
    box-shadow 0 0 0 3px rgba(59, 130, 246, 0.1)

.colorpicker-input-preview
  display flex
  align-items center
  justify-content center
  width 48px
  min-width 48px
  border-right 2px solid $cp-border
  position relative
  cursor pointer
  transition background-color 0.2s ease
  
  // Schachbrettmuster für Transparenz
  &::before
    content ''
    position absolute
    top 0
    left 0
    right 0
    bottom 0
    background linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%)
    background-size 8px 8px
    background-position 0 0, 0 4px, 4px -4px, -4px 0px
    z-index -1

input.colorpicker-has-preview
  border none
  flex 1
  padding 10px 14px
  font-size 15px
  font-family 'Monaco', 'Menlo', monospace
  background transparent
  
  &:focus
    outline none
    box-shadow none

/* Compact Button */
.colorpicker-compact-button
  display inline-flex
  align-items center
  justify-content center
  width 40px
  height 40px
  padding 4px
  border 2px solid $cp-border
  border-radius ($cp-radius - 2px)
  background $cp-bg
  cursor pointer
  transition all 0.2s ease
  vertical-align middle
  
  &:hover
    border-color $cp-primary
    box-shadow 0 2px 4px rgba(0, 0, 0, 0.1)
    transform translateY(-1px)
  
  &:active
    transform translateY(0) scale(0.98)
  
  &:focus
    outline none
    border-color $cp-primary
    box-shadow 0 0 0 3px rgba(59, 130, 246, 0.1)
  
  // EyeDropper Icon im Compact Mode
  svg
    width 20px
    height 20px
    display block
    color $cp-text
  
  &:focus
    outline none
    border-color $cp-primary
    box-shadow 0 0 0 3px rgba(59, 130, 246, 0.1)
  
  &:active
    transform translateY(0)
  
  @media (prefers-reduced-motion: reduce)
    transition none
    
    &:hover
      transform none
    
    &:active
      transform none

.colorpicker-compact-preview
  display block
  width 100%
  height 100%
  border-radius ($cp-radius - 4px)
  border 1px solid rgba(0, 0, 0, 0.1)
  position relative
  overflow hidden
  
  // Schachbrettmuster für Transparenz
  &::before
    content ''
    position absolute
    top 0
    left 0
    right 0
    bottom 0
    background linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%)
    background-size 6px 6px
    background-position 0 0, 0 3px, 3px -3px, -3px 0px
    z-index -1

/* Dark Mode Support */
@media (prefers-color-scheme: dark)
  .colorpicker-container
    background #1f2937
    border-color #374151
    color #e5e7eb
  
  .colorpicker-compact-button
    background #1f2937
    border-color #374151
    
    &:hover
      border-color #60a5fa
      box-shadow 0 2px 4px rgba(0, 0, 0, 0.3)
    
    &:focus
      border-color #60a5fa
      box-shadow 0 0 0 3px rgba(96, 165, 250, 0.2)
  
  .colorpicker-label
    color #9ca3af
  
  .colorpicker-input
    background #111827
    border-color #374151
    color #f9fafb
    
    &:focus
      border-color #60a5fa
      box-shadow 0 0 0 3px rgba(96, 165, 250, 0.2)
  
  .colorpicker-preview-color
    border-color #374151
  
  .colorpicker-eyedropper-btn
    background #1f2937
    border-color #374151
    color #e5e7eb
    
    &:hover
      background #111827
      border-color #60a5fa
    
    &:focus
      border-color #60a5fa
      box-shadow 0 0 0 3px rgba(96, 165, 250, 0.2)
  
  .colorpicker-system-picker-btn
    background #1f2937
    border-color #374151
    color #e5e7eb
    
    &:hover
      background #111827
      border-color #60a5fa
    
    &:focus
      border-color #60a5fa
      box-shadow 0 0 0 3px rgba(96, 165, 250, 0.2)
  
  .colorpicker-slider
    &:focus
      box-shadow 0 0 0 2px #60a5fa
    
    &::-webkit-slider-thumb
      border-color #60a5fa
    
    &::-moz-range-thumb
      border-color #60a5fa
  
  .colorpicker-preset
    &:hover
      border-color #60a5fa
    
    &:focus
      border-color #60a5fa
  
  .colorpicker-preset-list-item
    background #1f2937
    
    &:hover
      background #111827
      border-color #374151
    
    &:focus
      background #111827
      border-color #374151
  
  .colorpicker-preset-label
    color #e5e7eb
  
  .colorpicker-input-group
    background #1f2937
    border-color #374151
    
    &:focus-within
      border-color #60a5fa
  
  .colorpicker-input-preview
    border-right-color #374151
  
  input.colorpicker-has-preview
    color #f9fafb
    
    &:focus
      box-shadow 0 0 0 2px rgba(96, 165, 250, 0.3)

/* High Contrast Mode */
@media (prefers-contrast: high)
  .colorpicker-container
    border-width 2px
  
  .colorpicker-saturation
    outline 2px solid currentColor
  
  .colorpicker-saturation-pointer
    border-width 4px
  
  .colorpicker-preset
    border-width 3px

/* Reduced Motion */
@media (prefers-reduced-motion: reduce)
  .colorpicker-slider::-webkit-slider-thumb
    transition none
  
  .colorpicker-slider::-moz-range-thumb
    transition none
  
  .colorpicker-preset
    transition none
  
  .colorpicker-input
    transition none
  
  .colorpicker-saturation-pointer
    transition none

/* Animation */
@keyframes colorpicker-fadeIn
  from
    opacity 0
    transform translateY(-8px)
  to
    opacity 1
    transform translateY(0)

.colorpicker-container:not([style*="display: none"])
  animation colorpicker-fadeIn 0.2s ease-out
  
  @media (prefers-reduced-motion: reduce)
    animation none
